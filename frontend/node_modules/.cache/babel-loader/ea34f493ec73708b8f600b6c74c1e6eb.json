{"remainingRequest":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue","mtime":1681808868112},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\babel.config.js","mtime":1679503202000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAiZmlsZS1zYXZlciI7CmltcG9ydCBGaWxlU2F2ZXIgZnJvbSAiZmlsZS1zYXZlciI7CmltcG9ydCB7IHdyaXRlLCB1dGlscyB9IGZyb20gInhsc3giOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHRhcmVhOiAiIiwKICAgICAgaW5wdXQ6ICIiLAogICAgICByZXN1bHQ6ICIiLAogICAgICBzdGFnZTogZmFsc2UsCiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICBpbWFnZVVybDogJycsCiAgICAgIGZpbGVMaXN0OiAiIiwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WvvOWHumV4Y2VsCiAgICBoYW5kbGVEb3dubG9hZDogZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQobmFtZSkgewogICAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhjZWxfdGFibGUiKTsKICAgICAgdmFyIGV0ID0gdXRpbHMudGFibGVfdG9fYm9vayh0YWJsZSk7CiAgICAgIHZhciBvdXRwdXQgPSB3cml0ZShldCwgewogICAgICAgIGJvb2tUeXBlOiAieGxzeCIsCiAgICAgICAgYm9va1NTVDogdHJ1ZSwKICAgICAgICB0eXBlOiAiYXJyYXkiCiAgICAgIH0pOwogICAgICB0cnkgewogICAgICAgIEZpbGVTYXZlci5zYXZlQXMobmV3IEJsb2IoW291dHB1dF0sIHsKICAgICAgICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iCiAgICAgICAgfSksICIiLmNvbmNhdChuYW1lLCAiLnhsc3giKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIHJldHVybiBvdXRwdXQ7CiAgICB9LAogICAgZXJyb3JDb3JyZWN0OiBmdW5jdGlvbiBlcnJvckNvcnJlY3QoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIGtleSA9IHRoYXQuaW5wdXQ7CiAgICAgIGNvbnNvbGUubG9nKGtleSk7CiAgICAgIGlmIChrZXkgPT09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6L6T5YWl5YaF5a655LiN6IO95Li656m6IiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pOwogICAgICAgIHRoYXQucmVzdWx0ID0gIiI7CiAgICAgICAgdGhhdC52aXNpYmxlID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g6K+35rGC5ZCO56uvQVBJ5pyN5Yqh77yM6K+35rGC5pa55rOV5Li6cG9zdO+8jOivt+axguS9k+Wtl+auteS4umpzb27moLzlvI8gdGV4dAogICAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly8xNzIuMjEuMTA4LjU3OjgwMDAvYXBpL2dwdC9pbWFnZUNyZWF0ZSIsIHsKICAgICAgICAgIHRleHQ6IHRoYXQuaW5wdXQsCiAgICAgICAgICBrZXk6IHRoYXQuaW5wdXQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgdGhhdC5pbWFnZVVybCA9IHJlc3BvbnNlLmRhdGEuY29ycmVjdGlvblJlc3VsdHM7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LmltYWdlVXJsKTsKICAgICAgICAgIHRoYXQudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICB0aGF0LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICJTdWNjZXNz77yBIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIHRoYXQucmVzdWx0ID0gIiI7CiAgICAgICAgICB0aGF0LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fmsYLlh7rnjrDlvILluLjvvIEiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtmaWxlXTsKICAgICAgLy8g6K+75Y+WdHh05paH5Lu2CiAgICAgIHRoaXMucmVhZChmaWxlKTsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICJ0eHTmlofmnKzlhoXlrrnlr7zlhaXmiJDlip/vvIEiLAogICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICB9KTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoZikgewogICAgICB2YXIgcmQgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHJkLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gdGhpcy5yZWFkQXNBcnJheUJ1ZmZlcuWHveaVsOWGhe+8jOS8muWbnuiwg3RoaXMub25sb2Fk5Ye95pWw44CC5Zyo6L+Z6YeM5aSE55CG57uT5p6cCiAgICAgICAgdmFyIGNvbnQgPSByZC5yZWFkaW5nKHsKICAgICAgICAgIGVuY29kZTogIlVURi04IgogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKGNvbnQpOwogICAgICAgIHRoYXQudGV4dGFyZWEgPSBjb250OwogICAgICB9OwogICAgICByZC5yZWFkQXNCaW5hcnlTdHJpbmcoZik7CiAgICB9LAogICAgc2F2ZVJlc3VsdDogZnVuY3Rpb24gc2F2ZVJlc3VsdCgpIHsKICAgICAgdmFyIHRlbXBEYXRhID0gdGhpcy5yZXN1bHQ7CiAgICAgIGlmICh0ZW1wRGF0YSA9PT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLovpPlhaXlhoXlrrnkuLrnqbrvvIEiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHRlbXBSZXN1bHQgPSBuZXcgQmxvYihbdGVtcERhdGFdLCB7CiAgICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IgogICAgICAgIH0pOwogICAgICAgIHNhdmVBcyh0ZW1wUmVzdWx0LCAiQ2hhdEdQVOe7k+aenC50eHQiKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["axios","saveAs","FileSaver","write","utils","data","textarea","input","result","stage","visible","imageUrl","fileList","tableData","loading","methods","handleDownload","name","table","document","getElementById","et","table_to_book","output","bookType","bookSST","type","Blob","concat","e","errorCorrect","that","key","console","log","$message","showClose","message","post","text","then","response","correctionResults","catch","error","beforeUpload","file","read","f","rd","FileReader","onload","cont","reading","encode","readAsBinaryString","saveResult","tempData","tempResult"],"sources":["src/views/imagecreate/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-col :span=\"12\">\n      <div class=\"tip\">请输入提示语句:</div>\n      <el-input\n        v-model=\"input\"\n        type=\"input\"\n        :disabled=\"stage\"\n        :rows=\"11\"\n        placeholder=\"请输入\"\n        clearable\n      />\n      <div style=\"padding-top: 10px; padding-bottom: 10px\">\n        <el-button type=\"primary\" @click=\"errorCorrect()\" :loading=\"loading\"\n          >开始创作</el-button\n        >\n        <el-button\n          type=\"basic\"\n          style=\"margin-left: 24px; margin-top: 16px\"\n          @click=\"handleDownload('text-demo')\"\n          >导出图片</el-button\n        >\n      </div>\n      <el-image style=\"padding-top: 48px\" :src=\"imageUrl\">\n        <template #error>\n          <div class=\"image-slot\">\n            <el-icon><icon-picture /></el-icon>\n          </div>\n        </template>\n      </el-image>\n    </el-col>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport FileSaver from \"file-saver\";\nimport { write, utils } from \"xlsx\";\n\nexport default {\n  data() {\n    return {\n      textarea: \"\",\n      input: \"\",\n      result: \"\",\n      stage: false,\n      visible: false,\n      imageUrl: '',\n      fileList: \"\",\n      tableData: [],\n      loading: false,\n    };\n  },\n  methods: {\n    //导出excel\n    handleDownload(name) {\n      let table = document.getElementById(\"excel_table\");\n      let et = utils.table_to_book(table);\n      let output = write(et, {\n        bookType: \"xlsx\",\n        bookSST: true,\n        type: \"array\",\n      });\n\n      try {\n        FileSaver.saveAs(\n          new Blob([output], { type: \"application/octet-stream\" }),\n          `${name}.xlsx`\n        );\n      } catch (e) {}\n\n      return output;\n    },\n    errorCorrect() {\n      var that = this;\n      that.loading = true;\n      var key = that.input;\n      console.log(key)\n      if (key === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容不能为空\",\n          type: \"warning\",\n        });\n        that.result = \"\";\n        that.visible = false;\n      } else {\n        // 请求后端API服务，请求方法为post，请求体字段为json格式 text\n        axios\n          .post(\"http://172.21.108.57:8000/api/gpt/imageCreate\", {\n            text: that.input, \n            key: that.input\n\n          })\n          .then((response) => {\n            console.log(response);\n            that.imageUrl = response.data.correctionResults\n            console.log(that.imageUrl)\n            that.visible = true;\n            that.loading = false;\n            that.$message({\n              showClose: true,\n              message: \"Success！\",\n              type: \"success\",\n            });\n          })\n          .catch((error) => {\n            console.log(error);\n            that.result = \"\";\n            that.visible = false;\n            that.$message({\n              showClose: true,\n              message: \"请求出现异常！\",\n              type: \"error\",\n            });\n          });\n      }\n    },\n    beforeUpload(file) {\n      this.fileList = [file];\n      // 读取txt文件\n      this.read(file);\n      this.$message({\n        showClose: true,\n        message: \"txt文本内容导入成功！\",\n        type: \"success\",\n      });\n      return false;\n    },\n    read(f) {\n      const rd = new FileReader();\n      var that = this;\n      rd.onload = (e) => {\n        // this.readAsArrayBuffer函数内，会回调this.onload函数。在这里处理结果\n        const cont = rd.reading({ encode: \"UTF-8\" });\n        console.log(cont);\n        that.textarea = cont;\n      };\n      rd.readAsBinaryString(f);\n    },\n    saveResult() {\n      var tempData = this.result;\n      if (tempData === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容为空！\",\n          type: \"warning\",\n        });\n      } else {\n        var tempResult = new Blob([tempData], {\n          type: \"text/plain;charset=utf-8\",\n        });\n        saveAs(tempResult, \"ChatGPT结果.txt\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tip {\n  font-family: Helvetica Neue, Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  font-weight: normal;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>\n"],"mappings":"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"}]}