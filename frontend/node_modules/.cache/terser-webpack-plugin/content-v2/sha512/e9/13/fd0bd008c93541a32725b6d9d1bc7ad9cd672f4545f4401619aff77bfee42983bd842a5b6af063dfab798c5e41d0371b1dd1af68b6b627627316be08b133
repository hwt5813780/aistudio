{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-71eb55c0\"],{\"2a06\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"app-container\"},[t(\"el-col\",{attrs:{span:12}},[t(\"el-row\",[t(\"div\",{staticClass:\"tip\"},[e._v(\" 请上传要提取的图片 \")]),t(\"el-upload\",{staticClass:\"upload-demo\",staticStyle:{\"padding-bottom\":\"24px\"},attrs:{action:\"\",limit:10,\"http-request\":e.uploadImg,accept:\".jpg,.jpeg,.png,.bmp\"}},[t(\"el-button\",{attrs:{type:\"primary\"}},[e._v(\"点击上传\")])],1)],1),t(\"el-row\",[t(\"div\",{staticClass:\"tip\"},[e._v(\" 请输入需要提取的信息（中文逗号隔开，尽可能描述准确） \")]),t(\"el-input\",{staticStyle:{\"padding-bottom\":\"10px\"},attrs:{type:\"input\",rows:8},model:{value:e.input,callback:function(t){e.input=t},expression:\"input\"}})],1),t(\"el-row\",{staticStyle:{\"padding-top\":\"10px\",\"padding-bottom\":\"30px\"}},[t(\"div\",{staticClass:\"tip\"},[e._v(\" 模型选择 \")]),t(\"el-select\",{staticClass:\"m-2\",staticStyle:{\"padding-right\":\"24px\"},attrs:{placeholder:\"Select\",size:\"large\"},model:{value:e.value,callback:function(t){e.value=t},expression:\"value\"}},e._l(e.options,(function(e){return t(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t(\"el-button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:function(t){return e.imageCorrect()}}},[e._v(\"开始提取\")]),t(\"el-button\",{attrs:{type:\"basic\"},on:{click:function(t){return e.handleDownload(\"demo\")}}},[e._v(\"导出Excel\")])],1),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"tip\"},[e._v(\" 图片识别和识别结果： \")]),t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{id:\"excel_table\",data:e.tableData}},[t(\"el-table-column\",{attrs:{prop:\"prompt\",label:\"Prompt\"}}),t(\"el-table-column\",{attrs:{prop:\"value\",label:\"Value\"}})],1)],1),t(\"el-col\",{attrs:{span:10}},[t(\"div\",{staticClass:\"demo-image__error\",staticStyle:{\"text-align\":\"center\"}},[t(\"div\",{staticClass:\"block\",staticStyle:{\"padding-top\":\"24px\",\"padding-bottom\":\"10px\"}},[t(\"span\",{staticClass:\"demonstration\"})]),t(\"el-image\",{staticStyle:{\"padding-left\":\"48px\"},attrs:{src:e.imageUrl}})],1)])],1)},l=[],i=(a(\"ace4\"),a(\"d3b7\"),a(\"5cc6\"),a(\"9a8c\"),a(\"a975\"),a(\"735e\"),a(\"c1ac\"),a(\"d139\"),a(\"3a7b\"),a(\"d5d6\"),a(\"82f8\"),a(\"e91f\"),a(\"60bd\"),a(\"5f96\"),a(\"3280\"),a(\"3fcc\"),a(\"ca91\"),a(\"25a1\"),a(\"cd26\"),a(\"3c5d\"),a(\"2954\"),a(\"649e\"),a(\"219c\"),a(\"170b\"),a(\"b39a\"),a(\"72f7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"2b3d\"),a(\"9861\"),a(\"bc3a\")),o=a.n(i),n=a(\"21a6\"),c=a.n(n),r=a(\"2b0e\"),p=a(\"25ca\"),d={data:function(){return{fileData:\"\",input:\"\",visible:!1,tableData:[],imageUrl:\"https://s1.ax1x.com/2023/03/07/ppZtSiT.png\",fit:\"cover\",loading:!1,value:Object(r[\"ref\"])(1),options:[{value:1,label:\"ERNIE-3.0\"},{value:2,label:\"gpt-3.5-turbo\"}]}},beforeCreate:function(){FileReader.prototype.reading=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"pms\",t=e.encode,a=new Uint8Array(this.result),s=new TextDecoder(t||\"UTF-8\").decode(a);return s},FileReader.prototype.readAsBinaryString=function(e){var t=this;this.onload||(this.onload=function(e){var a=t.reading();console.log(a)}),this.readAsArrayBuffer(e)}},methods:{handleDownload:function(e){var t=document.getElementById(\"excel_table\"),a=p[\"a\"].table_to_book(t),s=Object(p[\"b\"])(a,{bookType:\"xlsx\",bookSST:!0,type:\"array\"});try{c.a.saveAs(new Blob([s],{type:\"application/octet-stream\"}),\"\".concat(e,\".xlsx\"))}catch(l){}return s},uploadImg:function(e){this.fileData=e.file,console.log(this.fileData),this.$message({showClose:!0,message:\"图片上传成功！\",type:\"success\"}),this.imageUrl=URL.createObjectURL(e.file),console.log(this.imageUrl)},saveResult:function(){var e=this.imgCscResult;if(\"\"===e)this.$message({showClose:!0,message:\"识别结果内容为空！\",type:\"warning\"});else{var t=new Blob([e],{type:\"text/plain;charset=utf-8\"});Object(n[\"saveAs\"])(t,\"图片识别结果.txt\")}},imageCorrect:function(){var e=this;if(e.loading=!0,\"\"===e.fileData)return this.$message({showClose:!0,message:\"请先选择要进行识别的图片文件！\",type:\"warning\"}),e.imgCscResult=\"\",void(e.visible=!1);var t={headers:{\"Content-Type\":\"multipart/form-data\"},params:{key:e.input,value:e.value}},a=new FormData;a.append(\"file\",e.fileData),o.a.post(\"http://localhost:8000/api/gpt/imageCorrect\",a,t).then((function(t){console.log(t),e.imgCscResult=t.data.correctionResults,e.tableData=t.data.correctionResults,console.log(e.tableData),e.visible=!0,e.loading=!1,e.$message({showClose:!0,message:\"图片识别完成！\",type:\"success\"})})).catch((function(t){console.log(t),e.imgCscResult=\"\",e.visible=!1,e.$message({showClose:!0,message:\"请求出现异常！\",type:\"error\"})}))}}},u=d,b=(a(\"5ba3\"),a(\"2877\")),g=Object(b[\"a\"])(u,s,l,!1,null,\"e05b4402\",null);t[\"default\"]=g.exports},\"5ba3\":function(e,t,a){\"use strict\";a(\"ce9b\")},ce9b:function(e,t,a){}}]);","extractedComments":[]}