{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-07ac4356\"],{\"2a06\":function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"app-container\"},[t(\"el-col\",{attrs:{span:12}},[t(\"el-row\",[t(\"div\",{staticClass:\"tip\"},[e._v(\"请上传要提取的图片\")]),t(\"el-upload\",{staticClass:\"upload-demo\",staticStyle:{\"padding-bottom\":\"24px\"},attrs:{action:\"\",limit:10,\"http-request\":e.uploadImg,accept:\".jpg,.jpeg,.png,.bmp\"}},[t(\"el-button\",{attrs:{type:\"primary\"}},[e._v(\"点击上传\")])],1)],1),t(\"el-row\",[t(\"div\",{staticClass:\"tip\"},[e._v(\" 请输入需要提取的信息（中文逗号隔开，尽可能描述准确） \")]),t(\"el-input\",{staticStyle:{\"padding-bottom\":\"10px\"},attrs:{type:\"input\",rows:8},model:{value:e.input,callback:function(t){e.input=t},expression:\"input\"}})],1),t(\"el-row\",{staticStyle:{\"padding-top\":\"10px\",\"padding-bottom\":\"30px\"}},[t(\"div\",{staticClass:\"tip\"},[e._v(\"模型选择\")]),t(\"el-select\",{staticClass:\"m-2\",staticStyle:{\"padding-right\":\"24px\"},attrs:{placeholder:\"Select\",size:\"large\"},model:{value:e.value,callback:function(t){e.value=t},expression:\"value\"}},e._l(e.options,(function(e){return t(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t(\"el-button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:function(t){return e.imageCorrect()}}},[e._v(\"开始提取\")]),t(\"el-button\",{attrs:{type:\"basic\"},on:{click:function(t){return e.handleDownload(\"demo\")}}},[e._v(\"导出Excel\")])],1),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.visible,expression:\"visible\"}],staticClass:\"tip\"},[e._v(\"图片识别和识别结果：\")]),t(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{id:\"excel_table\",data:e.tableData}},[t(\"el-table-column\",{attrs:{prop:\"prompt\",label:\"Prompt\"}}),t(\"el-table-column\",{attrs:{prop:\"value\",label:\"Value\"}})],1)],1),t(\"el-col\",{attrs:{span:10}},[t(\"div\",{staticClass:\"demo-image__error\",staticStyle:{\"text-align\":\"center\"}},[t(\"div\",{staticClass:\"block\",staticStyle:{\"padding-top\":\"24px\",\"padding-bottom\":\"10px\"}},[t(\"span\",{staticClass:\"demonstration\"})]),t(\"el-image\",{staticStyle:{\"padding-left\":\"48px\"},attrs:{src:e.imageUrl,fit:e.fit},scopedSlots:e._u([{key:\"error\",fn:function(){return[t(\"div\",{staticClass:\"image-slot\"},[t(\"el-icon\",[t(\"icon-picture\")],1)],1)]},proxy:!0}])})],1)])],1)},o=[],r=a(\"c7eb\"),s=a(\"1da1\"),i=(a(\"ace4\"),a(\"d3b7\"),a(\"5cc6\"),a(\"9a8c\"),a(\"a975\"),a(\"735e\"),a(\"c1ac\"),a(\"d139\"),a(\"3a7b\"),a(\"d5d6\"),a(\"82f8\"),a(\"e91f\"),a(\"60bd\"),a(\"5f96\"),a(\"3280\"),a(\"3fcc\"),a(\"ca91\"),a(\"25a1\"),a(\"cd26\"),a(\"3c5d\"),a(\"2954\"),a(\"649e\"),a(\"219c\"),a(\"170b\"),a(\"b39a\"),a(\"72f7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"2b3d\"),a(\"9861\"),a(\"bc3a\"),a(\"21a6\")),l=a.n(i),c=a(\"2b0e\"),p=a(\"25ca\"),u=\"0647cbe4b4b53e45ce1386c673207f69\",d=\"0bf8e7c1eef74806987e4c5c5fe3615a\",b=\"https://api.textin.com/ai/service/v2/recognize\",f=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(e){var n=this.result,o=new XMLHttpRequest;o.open(\"POST\",b),o.setRequestHeader(\"x-ti-app-id\",u),o.setRequestHeader(\"x-ti-secret-code\",d),o.onreadystatechange=function(){if(4===o.readyState){o.onreadystatechange=null;var n=o.response,r={};try{r=JSON.parse(n);for(var s=\"\",i=0;i<r.result.lines.length;i++)s+=r.result.lines[i].text+\" \";t(s)}catch(e){a(e)}}},o.send(n)}}))},g=a(\"7ab5\"),v={data:function(){return{fileData:\"\",a:\"1\",input:\"\",visible:!1,tableData:[],textforgpt:\"\",imageUrl:\"\",fit:\"cover\",loading:!1,value:Object(c[\"ref\"])(1),options:[{value:1,label:\"gpt-3.5-turbo\"}]}},beforeCreate:function(){FileReader.prototype.reading=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"pms\",t=e.encode,a=new Uint8Array(this.result),n=new TextDecoder(t||\"UTF-8\").decode(a);return n},FileReader.prototype.readAsBinaryString=function(e){var t=this;this.onload||(this.onload=function(e){var a=t.reading();console.log(a)}),this.readAsArrayBuffer(e)}},methods:{handleDownload:function(e){var t=document.getElementById(\"excel_table\"),a=p[\"a\"].table_to_book(t),n=Object(p[\"b\"])(a,{bookType:\"xlsx\",bookSST:!0,type:\"array\"});try{l.a.saveAs(new Blob([n],{type:\"application/octet-stream\"}),\"\".concat(e,\".xlsx\"))}catch(o){}return n},uploadImg:function(e){var t=this;return Object(s[\"a\"])(Object(r[\"a\"])().mark((function a(){var n;return Object(r[\"a\"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,t.fileData=e.file,console.log(e.file),t.$message({showClose:!0,message:\"图片上传成功！\",type:\"success\"}),t.imageUrl=URL.createObjectURL(e.file),console.log(t.fileData),a.next=8,f(t.fileData);case 8:n.textforgpt=a.sent,console.log(n.textforgpt);case 10:case\"end\":return a.stop()}}),a)})))()},saveResult:function(){var e=this.imgCscResult;if(\"\"===e)this.$message({showClose:!0,message:\"识别结果内容为空！\",type:\"warning\"});else{var t=new Blob([e],{type:\"text/plain;charset=utf-8\"});Object(i[\"saveAs\"])(t,\"图片识别结果.txt\")}},imageCorrect:function(){var e=this;return Object(s[\"a\"])(Object(r[\"a\"])().mark((function t(){var a,n;return Object(r[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.loading=!0,\"\"!==a.fileData){t.next=7;break}return e.$message({showClose:!0,message:\"请先选择要进行识别的图片文件！\",type:\"warning\"}),a.imgCscResult=\"\",a.visible=!1,t.abrupt(\"return\");case 7:return t.next=9,Object(g[\"a\"])(a.textforgpt,a.input);case 9:n=t.sent,console.log(a.textforgpt),console.log(a.input),e.tableData=n,e.loading=!1;case 14:case\"end\":return t.stop()}}),t)})))()}}},m=v,h=(a(\"ebf6\"),a(\"2877\")),x=Object(h[\"a\"])(m,n,o,!1,null,\"b7141520\",null);t[\"default\"]=x.exports},\"7ab5\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return l}));a(\"498a\");var n=a(\"5c08\"),o=n.Configuration,r=n.OpenAIApi,s=new o({apiKey:\"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\"}),i=new r(s),l=function(e,t){var a=i.createChatCompletion({model:\"gpt-3.5-turbo\",temperature:0,messages:[{role:\"system\",content:'你是一个信息提取机器人，接下来我会用：“A：内容//B：信息提示”给你多个prompt，你需要返回给我一个数组，数组的格式为：[{\"prompt\":\"prompt的内容\",\"value\":\"提取的内容\"}]，如果无法提取则显示为-'},{role:\"user\",content:\"A：甲方购房总价款是12000元，税费为3%//B：甲方购房总价款，甲方购房税费\"},{role:\"assistant\",content:'[{\"prompt\":\"甲方购房总价款\",\"value\":\"12000元\"},{\"prompt\":\"甲方购房税费\",\"value\":\"360元\"}]'},{role:\"user\",content:\"A：\"+e+\"//B：\"+t}]});return a.then((function(e){var t=JSON.parse(e.data.choices[0].message.content.trim());return console.log(t),t})).catch((function(e){return console.error(e),e}))}},\"91eb\":function(e,t,a){},ebf6:function(e,t,a){\"use strict\";a(\"91eb\")}}]);","extractedComments":[]}