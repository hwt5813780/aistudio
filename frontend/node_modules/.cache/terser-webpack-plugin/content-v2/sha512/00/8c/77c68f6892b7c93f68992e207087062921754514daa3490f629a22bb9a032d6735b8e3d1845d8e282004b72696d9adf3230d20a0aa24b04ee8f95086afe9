{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-32e1b3d6\"],{\"4f40\":function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"app-container\"},[e(\"el-col\",{attrs:{span:12}},[e(\"el-row\",[e(\"div\",{staticClass:\"tip\"},[t._v(\" 请上传要提取的文档 \")]),e(\"el-upload\",{staticClass:\"upload-demo\",staticStyle:{\"padding-bottom\":\"24px\"},attrs:{action:\"\",limit:10,\"http-request\":t.uploadImg,accept:\".pdf,.doc,.docx\"}},[e(\"el-button\",{attrs:{type:\"primary\"}},[t._v(\"点击上传\")])],1)],1),e(\"el-row\",[e(\"div\",{staticClass:\"tip\"},[t._v(\" 请输入需要提取的信息（中文逗号隔开，尽可能描述准确） \")]),e(\"el-input\",{staticStyle:{\"padding-bottom\":\"10px\"},attrs:{type:\"input\",rows:8},model:{value:t.input,callback:function(e){t.input=e},expression:\"input\"}})],1),e(\"el-row\",{staticStyle:{\"padding-top\":\"10px\",\"padding-bottom\":\"30px\"}},[e(\"div\",{staticClass:\"tip\"},[t._v(\" 模型选择 \")]),e(\"el-select\",{staticClass:\"m-2\",staticStyle:{\"padding-right\":\"24px\"},attrs:{placeholder:\"Select\",size:\"large\"},model:{value:t.value,callback:function(e){t.value=e},expression:\"value\"}},t._l(t.options,(function(t){return e(\"el-option\",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e(\"el-button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:function(e){return t.imageCorrect()}}},[t._v(\"开始提取\")]),e(\"el-button\",{attrs:{type:\"basic\"},on:{click:function(e){return t.handleDownload(\"demo\")}}},[t._v(\"导出Excel\")])],1),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.visible,expression:\"visible\"}],staticClass:\"tip\"},[t._v(\" 文档识别和识别结果： \")]),e(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{id:\"excel_table\",data:t.tableData}},[e(\"el-table-column\",{attrs:{prop:\"prompt\",label:\"Prompt\"}}),e(\"el-table-column\",{attrs:{prop:\"value\",label:\"Value\"}})],1)],1),e(\"el-col\",{attrs:{span:10}},[e(\"div\",{staticClass:\"demo-image__error\",staticStyle:{\"text-align\":\"center\"}},[e(\"div\",{staticClass:\"block\",staticStyle:{\"padding-top\":\"24px\",\"padding-bottom\":\"10px\"}},[e(\"span\",{staticClass:\"demonstration\"})]),e(\"el-image\",{staticStyle:{\"padding-left\":\"48px\"},attrs:{src:t.imageUrl,fit:t.fit},scopedSlots:t._u([{key:\"error\",fn:function(){return[e(\"div\",{staticClass:\"image-slot\"},[e(\"el-icon\",[e(\"icon-picture\")],1)],1)]},proxy:!0}])})],1)])],1)},l=[],i=(a(\"ace4\"),a(\"d3b7\"),a(\"5cc6\"),a(\"9a8c\"),a(\"a975\"),a(\"735e\"),a(\"c1ac\"),a(\"d139\"),a(\"3a7b\"),a(\"d5d6\"),a(\"82f8\"),a(\"e91f\"),a(\"60bd\"),a(\"5f96\"),a(\"3280\"),a(\"3fcc\"),a(\"ca91\"),a(\"25a1\"),a(\"cd26\"),a(\"3c5d\"),a(\"2954\"),a(\"649e\"),a(\"219c\"),a(\"170b\"),a(\"b39a\"),a(\"72f7\"),a(\"bc3a\")),o=a.n(i),n=a(\"21a6\"),c=a.n(n),r=a(\"2b0e\"),p=a(\"25ca\"),d={data:function(){return{fileData:\"\",input:\"\",visible:!1,tableData:[],imageUrl:\"\",fit:\"cover\",loading:!1,value:Object(r[\"ref\"])(1),options:[{value:1,label:\"ERNIE-3.0\"},{value:2,label:\"gpt-3.5-turbo\"}]}},beforeCreate:function(){FileReader.prototype.reading=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"pms\",e=t.encode,a=new Uint8Array(this.result),s=new TextDecoder(e||\"UTF-8\").decode(a);return s},FileReader.prototype.readAsBinaryString=function(t){var e=this;this.onload||(this.onload=function(t){var a=e.reading();console.log(a)}),this.readAsArrayBuffer(t)}},methods:{handleDownload:function(t){var e=document.getElementById(\"excel_table\"),a=p[\"a\"].table_to_book(e),s=Object(p[\"b\"])(a,{bookType:\"xlsx\",bookSST:!0,type:\"array\"});try{c.a.saveAs(new Blob([s],{type:\"application/octet-stream\"}),\"\".concat(t,\".xlsx\"))}catch(l){}return s},uploadImg:function(t){this.fileData=t.file,console.log(t.file),this.$message({showClose:!0,message:\"文档上传成功！\",type:\"success\"})},saveResult:function(){var t=this.imgCscResult;if(\"\"===t)this.$message({showClose:!0,message:\"识别结果内容为空！\",type:\"warning\"});else{var e=new Blob([t],{type:\"text/plain;charset=utf-8\"});Object(n[\"saveAs\"])(e,\"文档识别结果.txt\")}},imageCorrect:function(){var t=this;if(t.loading=!0,\"\"===t.fileData)return this.$message({showClose:!0,message:\"请先选择要进行识别的文档文件！\",type:\"warning\"}),t.imgCscResult=\"\",void(t.visible=!1);var e={headers:{\"Content-Type\":\"multipart/form-data\"},params:{key:t.input,value:t.value}},a=new FormData;a.append(\"file\",t.fileData),o.a.post(\"http://localhost:8000/api/gpt/docCorrect\",a,e).then((function(e){console.log(e),t.imgCscResult=e.data.correctionResults,t.tableData=e.data.correctionResults,console.log(t.tableData),t.visible=!0,t.loading=!1,t.$message({showClose:!0,message:\"文档识别完成！\",type:\"success\"})})).catch((function(e){console.log(e),t.imgCscResult=\"\",t.visible=!1,t.$message({showClose:!0,message:\"请求出现异常！\",type:\"error\"})}))}}},u=d,b=(a(\"61b8\"),a(\"2877\")),g=Object(b[\"a\"])(u,s,l,!1,null,\"89d3457a\",null);e[\"default\"]=g.exports},\"61b8\":function(t,e,a){\"use strict\";a(\"e341\")},e341:function(t,e,a){}}]);","extractedComments":[]}