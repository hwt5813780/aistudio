{"remainingRequest":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue","mtime":1681808868112},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678687252373},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678687255549},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678687252373},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678687256835}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IHNhdmVBcyB9IGZyb20gImZpbGUtc2F2ZXIiOwppbXBvcnQgRmlsZVNhdmVyIGZyb20gImZpbGUtc2F2ZXIiOwppbXBvcnQgeyB3cml0ZSwgdXRpbHMgfSBmcm9tICJ4bHN4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGV4dGFyZWE6ICIiLAogICAgICBpbnB1dDogIiIsCiAgICAgIHJlc3VsdDogIiIsCiAgICAgIHN0YWdlOiBmYWxzZSwKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgZmlsZUxpc3Q6ICIiLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WvvOWHumV4Y2VsCiAgICBoYW5kbGVEb3dubG9hZChuYW1lKSB7CiAgICAgIGxldCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJleGNlbF90YWJsZSIpOwogICAgICBsZXQgZXQgPSB1dGlscy50YWJsZV90b19ib29rKHRhYmxlKTsKICAgICAgbGV0IG91dHB1dCA9IHdyaXRlKGV0LCB7CiAgICAgICAgYm9va1R5cGU6ICJ4bHN4IiwKICAgICAgICBib29rU1NUOiB0cnVlLAogICAgICAgIHR5cGU6ICJhcnJheSIsCiAgICAgIH0pOwoKICAgICAgdHJ5IHsKICAgICAgICBGaWxlU2F2ZXIuc2F2ZUFzKAogICAgICAgICAgbmV3IEJsb2IoW291dHB1dF0sIHsgdHlwZTogImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIgfSksCiAgICAgICAgICBgJHtuYW1lfS54bHN4YAogICAgICAgICk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICByZXR1cm4gb3V0cHV0OwogICAgfSwKICAgIGVycm9yQ29ycmVjdCgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGF0LmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIga2V5ID0gdGhhdC5pbnB1dDsKICAgICAgY29uc29sZS5sb2coa2V5KQogICAgICBpZiAoa2V5ID09PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIui+k+WFpeWGheWuueS4jeiDveS4uuepuiIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5yZXN1bHQgPSAiIjsKICAgICAgICB0aGF0LnZpc2libGUgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDor7fmsYLlkI7nq69BUEnmnI3liqHvvIzor7fmsYLmlrnms5XkuLpwb3N077yM6K+35rGC5L2T5a2X5q615Li6anNvbuagvOW8jyB0ZXh0CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KCJodHRwOi8vMTcyLjIxLjEwOC41Nzo4MDAwL2FwaS9ncHQvaW1hZ2VDcmVhdGUiLCB7CiAgICAgICAgICAgIHRleHQ6IHRoYXQuaW5wdXQsIAogICAgICAgICAgICBrZXk6IHRoYXQuaW5wdXQKCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgdGhhdC5pbWFnZVVybCA9IHJlc3BvbnNlLmRhdGEuY29ycmVjdGlvblJlc3VsdHMKICAgICAgICAgICAgY29uc29sZS5sb2codGhhdC5pbWFnZVVybCkKICAgICAgICAgICAgdGhhdC52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdGhhdC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAiU3VjY2Vzc++8gSIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgdGhhdC5yZXN1bHQgPSAiIjsKICAgICAgICAgICAgdGhhdC52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+35rGC5Ye6546w5byC5bi477yBIiwKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtmaWxlXTsKICAgICAgLy8g6K+75Y+WdHh05paH5Lu2CiAgICAgIHRoaXMucmVhZChmaWxlKTsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICJ0eHTmlofmnKzlhoXlrrnlr7zlhaXmiJDlip/vvIEiLAogICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICByZWFkKGYpIHsKICAgICAgY29uc3QgcmQgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHJkLm9ubG9hZCA9IChlKSA9PiB7CiAgICAgICAgLy8gdGhpcy5yZWFkQXNBcnJheUJ1ZmZlcuWHveaVsOWGhe+8jOS8muWbnuiwg3RoaXMub25sb2Fk5Ye95pWw44CC5Zyo6L+Z6YeM5aSE55CG57uT5p6cCiAgICAgICAgY29uc3QgY29udCA9IHJkLnJlYWRpbmcoeyBlbmNvZGU6ICJVVEYtOCIgfSk7CiAgICAgICAgY29uc29sZS5sb2coY29udCk7CiAgICAgICAgdGhhdC50ZXh0YXJlYSA9IGNvbnQ7CiAgICAgIH07CiAgICAgIHJkLnJlYWRBc0JpbmFyeVN0cmluZyhmKTsKICAgIH0sCiAgICBzYXZlUmVzdWx0KCkgewogICAgICB2YXIgdGVtcERhdGEgPSB0aGlzLnJlc3VsdDsKICAgICAgaWYgKHRlbXBEYXRhID09PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIui+k+WFpeWGheWuueS4uuepuu+8gSIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHRlbXBSZXN1bHQgPSBuZXcgQmxvYihbdGVtcERhdGFdLCB7CiAgICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IiwKICAgICAgICB9KTsKICAgICAgICBzYXZlQXModGVtcFJlc3VsdCwgIkNoYXRHUFTnu5PmnpwudHh0Iik7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAmCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/imagecreate","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-col :span=\"12\">\n      <div class=\"tip\">请输入提示语句:</div>\n      <el-input\n        v-model=\"input\"\n        type=\"input\"\n        :disabled=\"stage\"\n        :rows=\"11\"\n        placeholder=\"请输入\"\n        clearable\n      />\n      <div style=\"padding-top: 10px; padding-bottom: 10px\">\n        <el-button type=\"primary\" @click=\"errorCorrect()\" :loading=\"loading\"\n          >开始创作</el-button\n        >\n        <el-button\n          type=\"basic\"\n          style=\"margin-left: 24px; margin-top: 16px\"\n          @click=\"handleDownload('text-demo')\"\n          >导出图片</el-button\n        >\n      </div>\n      <el-image style=\"padding-top: 48px\" :src=\"imageUrl\">\n        <template #error>\n          <div class=\"image-slot\">\n            <el-icon><icon-picture /></el-icon>\n          </div>\n        </template>\n      </el-image>\n    </el-col>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport FileSaver from \"file-saver\";\nimport { write, utils } from \"xlsx\";\n\nexport default {\n  data() {\n    return {\n      textarea: \"\",\n      input: \"\",\n      result: \"\",\n      stage: false,\n      visible: false,\n      imageUrl: '',\n      fileList: \"\",\n      tableData: [],\n      loading: false,\n    };\n  },\n  methods: {\n    //导出excel\n    handleDownload(name) {\n      let table = document.getElementById(\"excel_table\");\n      let et = utils.table_to_book(table);\n      let output = write(et, {\n        bookType: \"xlsx\",\n        bookSST: true,\n        type: \"array\",\n      });\n\n      try {\n        FileSaver.saveAs(\n          new Blob([output], { type: \"application/octet-stream\" }),\n          `${name}.xlsx`\n        );\n      } catch (e) {}\n\n      return output;\n    },\n    errorCorrect() {\n      var that = this;\n      that.loading = true;\n      var key = that.input;\n      console.log(key)\n      if (key === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容不能为空\",\n          type: \"warning\",\n        });\n        that.result = \"\";\n        that.visible = false;\n      } else {\n        // 请求后端API服务，请求方法为post，请求体字段为json格式 text\n        axios\n          .post(\"http://172.21.108.57:8000/api/gpt/imageCreate\", {\n            text: that.input, \n            key: that.input\n\n          })\n          .then((response) => {\n            console.log(response);\n            that.imageUrl = response.data.correctionResults\n            console.log(that.imageUrl)\n            that.visible = true;\n            that.loading = false;\n            that.$message({\n              showClose: true,\n              message: \"Success！\",\n              type: \"success\",\n            });\n          })\n          .catch((error) => {\n            console.log(error);\n            that.result = \"\";\n            that.visible = false;\n            that.$message({\n              showClose: true,\n              message: \"请求出现异常！\",\n              type: \"error\",\n            });\n          });\n      }\n    },\n    beforeUpload(file) {\n      this.fileList = [file];\n      // 读取txt文件\n      this.read(file);\n      this.$message({\n        showClose: true,\n        message: \"txt文本内容导入成功！\",\n        type: \"success\",\n      });\n      return false;\n    },\n    read(f) {\n      const rd = new FileReader();\n      var that = this;\n      rd.onload = (e) => {\n        // this.readAsArrayBuffer函数内，会回调this.onload函数。在这里处理结果\n        const cont = rd.reading({ encode: \"UTF-8\" });\n        console.log(cont);\n        that.textarea = cont;\n      };\n      rd.readAsBinaryString(f);\n    },\n    saveResult() {\n      var tempData = this.result;\n      if (tempData === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容为空！\",\n          type: \"warning\",\n        });\n      } else {\n        var tempResult = new Blob([tempData], {\n          type: \"text/plain;charset=utf-8\",\n        });\n        saveAs(tempResult, \"ChatGPT结果.txt\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tip {\n  font-family: Helvetica Neue, Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  font-weight: normal;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>\n"]}]}