{"remainingRequest":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue?vue&type=style&index=0&id=03b05730&scoped=true&lang=css&","dependencies":[{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\src\\views\\imagecreate\\index.vue","mtime":1681808868112},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\fastapi-skeleton\\fastapi-skeleton-master\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50aXAgewogIGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2EgTmV1ZSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICBtYXJnaW4tdG9wOiAxMHB4OwogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAiKA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/imagecreate","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-col :span=\"12\">\n      <div class=\"tip\">请输入提示语句:</div>\n      <el-input\n        v-model=\"input\"\n        type=\"input\"\n        :disabled=\"stage\"\n        :rows=\"11\"\n        placeholder=\"请输入\"\n        clearable\n      />\n      <div style=\"padding-top: 10px; padding-bottom: 10px\">\n        <el-button type=\"primary\" @click=\"errorCorrect()\" :loading=\"loading\"\n          >开始创作</el-button\n        >\n        <el-button\n          type=\"basic\"\n          style=\"margin-left: 24px; margin-top: 16px\"\n          @click=\"handleDownload('text-demo')\"\n          >导出图片</el-button\n        >\n      </div>\n      <el-image style=\"padding-top: 48px\" :src=\"imageUrl\">\n        <template #error>\n          <div class=\"image-slot\">\n            <el-icon><icon-picture /></el-icon>\n          </div>\n        </template>\n      </el-image>\n    </el-col>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport FileSaver from \"file-saver\";\nimport { write, utils } from \"xlsx\";\n\nexport default {\n  data() {\n    return {\n      textarea: \"\",\n      input: \"\",\n      result: \"\",\n      stage: false,\n      visible: false,\n      imageUrl: '',\n      fileList: \"\",\n      tableData: [],\n      loading: false,\n    };\n  },\n  methods: {\n    //导出excel\n    handleDownload(name) {\n      let table = document.getElementById(\"excel_table\");\n      let et = utils.table_to_book(table);\n      let output = write(et, {\n        bookType: \"xlsx\",\n        bookSST: true,\n        type: \"array\",\n      });\n\n      try {\n        FileSaver.saveAs(\n          new Blob([output], { type: \"application/octet-stream\" }),\n          `${name}.xlsx`\n        );\n      } catch (e) {}\n\n      return output;\n    },\n    errorCorrect() {\n      var that = this;\n      that.loading = true;\n      var key = that.input;\n      console.log(key)\n      if (key === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容不能为空\",\n          type: \"warning\",\n        });\n        that.result = \"\";\n        that.visible = false;\n      } else {\n        // 请求后端API服务，请求方法为post，请求体字段为json格式 text\n        axios\n          .post(\"http://172.21.108.57:8000/api/gpt/imageCreate\", {\n            text: that.input, \n            key: that.input\n\n          })\n          .then((response) => {\n            console.log(response);\n            that.imageUrl = response.data.correctionResults\n            console.log(that.imageUrl)\n            that.visible = true;\n            that.loading = false;\n            that.$message({\n              showClose: true,\n              message: \"Success！\",\n              type: \"success\",\n            });\n          })\n          .catch((error) => {\n            console.log(error);\n            that.result = \"\";\n            that.visible = false;\n            that.$message({\n              showClose: true,\n              message: \"请求出现异常！\",\n              type: \"error\",\n            });\n          });\n      }\n    },\n    beforeUpload(file) {\n      this.fileList = [file];\n      // 读取txt文件\n      this.read(file);\n      this.$message({\n        showClose: true,\n        message: \"txt文本内容导入成功！\",\n        type: \"success\",\n      });\n      return false;\n    },\n    read(f) {\n      const rd = new FileReader();\n      var that = this;\n      rd.onload = (e) => {\n        // this.readAsArrayBuffer函数内，会回调this.onload函数。在这里处理结果\n        const cont = rd.reading({ encode: \"UTF-8\" });\n        console.log(cont);\n        that.textarea = cont;\n      };\n      rd.readAsBinaryString(f);\n    },\n    saveResult() {\n      var tempData = this.result;\n      if (tempData === \"\") {\n        this.$message({\n          showClose: true,\n          message: \"输入内容为空！\",\n          type: \"warning\",\n        });\n      } else {\n        var tempResult = new Blob([tempData], {\n          type: \"text/plain;charset=utf-8\",\n        });\n        saveAs(tempResult, \"ChatGPT结果.txt\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tip {\n  font-family: Helvetica Neue, Arial, Helvetica, sans-serif;\n  font-size: 14px;\n  font-weight: normal;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>\n"]}]}